{
  "version": 3,
  "sources": ["../../react-hook-form-persist/dist/index.mjs"],
  "sourcesContent": ["var __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\n\n// src/index.tsx\nimport { useEffect } from \"react\";\nvar useFormPersist = (name, {\n  storage,\n  watch,\n  setValue,\n  exclude = [],\n  onDataRestored,\n  validate = false,\n  dirty = false,\n  onTimeout,\n  timeout\n}) => {\n  const watchedValues = watch();\n  const getStorage = () => storage || window.sessionStorage;\n  const clearStorage = () => getStorage().removeItem(name);\n  useEffect(() => {\n    const str = getStorage().getItem(name);\n    if (str) {\n      const _a = JSON.parse(str), { _timestamp = null } = _a, values = __objRest(_a, [\"_timestamp\"]);\n      const dataRestored = {};\n      const currTimestamp = Date.now();\n      if (timeout && currTimestamp - _timestamp > timeout) {\n        onTimeout && onTimeout();\n        clearStorage();\n        return;\n      }\n      Object.keys(values).forEach((key) => {\n        const shouldSet = !exclude.includes(key);\n        if (shouldSet) {\n          dataRestored[key] = values[key];\n          setValue(key, values[key], {\n            shouldValidate: validate,\n            shouldDirty: dirty\n          });\n        }\n      });\n      if (onDataRestored) {\n        onDataRestored(dataRestored);\n      }\n    }\n  }, [\n    storage,\n    name,\n    onDataRestored,\n    setValue\n  ]);\n  useEffect(() => {\n    const values = exclude.length ? Object.entries(watchedValues).filter(([key]) => !exclude.includes(key)).reduce((obj, [key, val]) => Object.assign(obj, { [key]: val }), {}) : Object.assign({}, watchedValues);\n    if (Object.entries(values).length) {\n      if (timeout !== void 0) {\n        values._timestamp = Date.now();\n      }\n      getStorage().setItem(name, JSON.stringify(values));\n    }\n  }, [watchedValues, timeout]);\n  return {\n    clear: () => getStorage().removeItem(name)\n  };\n};\nvar src_default = useFormPersist;\nexport {\n  src_default as default\n};\n"],
  "mappings": ";;;;;;;;AAiBA,mBAA0B;AAjB1B,IAAI,sBAAsB,OAAO;AACjC,IAAI,eAAe,OAAO,UAAU;AACpC,IAAI,eAAe,OAAO,UAAU;AACpC,IAAI,YAAY,CAAC,QAAQ,YAAY;AACnC,MAAI,SAAS,CAAC;AACd,WAAS,QAAQ;AACf,QAAI,aAAa,KAAK,QAAQ,IAAI,KAAK,QAAQ,QAAQ,IAAI,IAAI;AAC7D,aAAO,IAAI,IAAI,OAAO,IAAI;AAC9B,MAAI,UAAU,QAAQ;AACpB,aAAS,QAAQ,oBAAoB,MAAM,GAAG;AAC5C,UAAI,QAAQ,QAAQ,IAAI,IAAI,KAAK,aAAa,KAAK,QAAQ,IAAI;AAC7D,eAAO,IAAI,IAAI,OAAO,IAAI;AAAA,IAC9B;AACF,SAAO;AACT;AAIA,IAAI,iBAAiB,CAAC,MAAM;AAAA,EAC1B;AAAA,EACA;AAAA,EACA;AAAA,EACA,UAAU,CAAC;AAAA,EACX;AAAA,EACA,WAAW;AAAA,EACX,QAAQ;AAAA,EACR;AAAA,EACA;AACF,MAAM;AACJ,QAAM,gBAAgB,MAAM;AAC5B,QAAM,aAAa,MAAM,WAAW,OAAO;AAC3C,QAAM,eAAe,MAAM,WAAW,EAAE,WAAW,IAAI;AACvD,8BAAU,MAAM;AACd,UAAM,MAAM,WAAW,EAAE,QAAQ,IAAI;AACrC,QAAI,KAAK;AACP,YAAM,KAAK,KAAK,MAAM,GAAG,GAAG,EAAE,aAAa,KAAK,IAAI,IAAI,SAAS,UAAU,IAAI,CAAC,YAAY,CAAC;AAC7F,YAAM,eAAe,CAAC;AACtB,YAAM,gBAAgB,KAAK,IAAI;AAC/B,UAAI,WAAW,gBAAgB,aAAa,SAAS;AACnD,qBAAa,UAAU;AACvB,qBAAa;AACb;AAAA,MACF;AACA,aAAO,KAAK,MAAM,EAAE,QAAQ,CAAC,QAAQ;AACnC,cAAM,YAAY,CAAC,QAAQ,SAAS,GAAG;AACvC,YAAI,WAAW;AACb,uBAAa,GAAG,IAAI,OAAO,GAAG;AAC9B,mBAAS,KAAK,OAAO,GAAG,GAAG;AAAA,YACzB,gBAAgB;AAAA,YAChB,aAAa;AAAA,UACf,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AACD,UAAI,gBAAgB;AAClB,uBAAe,YAAY;AAAA,MAC7B;AAAA,IACF;AAAA,EACF,GAAG;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AACD,8BAAU,MAAM;AACd,UAAM,SAAS,QAAQ,SAAS,OAAO,QAAQ,aAAa,EAAE,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC,QAAQ,SAAS,GAAG,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,OAAO,OAAO,KAAK,EAAE,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,OAAO,OAAO,CAAC,GAAG,aAAa;AAC7M,QAAI,OAAO,QAAQ,MAAM,EAAE,QAAQ;AACjC,UAAI,YAAY,QAAQ;AACtB,eAAO,aAAa,KAAK,IAAI;AAAA,MAC/B;AACA,iBAAW,EAAE,QAAQ,MAAM,KAAK,UAAU,MAAM,CAAC;AAAA,IACnD;AAAA,EACF,GAAG,CAAC,eAAe,OAAO,CAAC;AAC3B,SAAO;AAAA,IACL,OAAO,MAAM,WAAW,EAAE,WAAW,IAAI;AAAA,EAC3C;AACF;AACA,IAAI,cAAc;",
  "names": []
}
